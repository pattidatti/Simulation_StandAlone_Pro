import{c as j,g as v,j as e,N as O,O as R,Q as I,U as M,n as L,o as z,p as A,b as T,u as _,S as $,W as P}from"./index-DF_E3w1r.js";import{PoliticalHubContent as D}from"./PoliticalHub-DvhCp30A.js";import"./GameButton-WU_vZW2J.js";import"./GameCard-B6_tvU6e.js";import"./Badge-CafaFQfG.js";import"./timer-4AyCdcCo.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],G=j("circle",B);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M5 9v6",key:"158jrl"}],["circle",{cx:"5",cy:"18",r:"3",key:"104gr9"}],["path",{d:"M12 3v18",key:"108xh3"}],["circle",{cx:"19",cy:"6",r:"3",key:"108a5v"}],["path",{d:"M16 15.7A9 9 0 0 0 19 9",key:"1e3vqb"}]],H=j("git-graph",K);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],F=j("list",V),U=({players:n,myId:o,onOpenProfile:r})=>{const[x,m]=v.useState(""),c=v.useMemo(()=>Object.values(n).filter(s=>!s.uid).filter(s=>{var i;return(i=s.name)==null?void 0:i.toLowerCase().includes(x.toLowerCase())}).sort((s,i)=>(i.lastActive||0)-(s.lastActive||0)),[n,x]),h=s=>Date.now()-s<1e3*60*5,p=s=>{switch(s){case"KING":return e.jsx(I,{size:14,className:"text-yellow-400"});case"BARON":return e.jsx(A,{size:14,className:"text-purple-400"});case"SOLDIER":return e.jsx(z,{size:14,className:"text-red-400"});case"MERCHANT":return e.jsx(L,{size:14,className:"text-emerald-400"});default:return e.jsx(M,{size:14,className:"text-slate-400"})}};return e.jsxs("div",{className:"flex flex-col h-full bg-slate-900/50 rounded-2xl border border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900/80 backdrop-blur-sm sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-black italic text-white flex items-center gap-2",children:[e.jsx(O,{className:"text-indigo-400",size:20}),"FOLKEREGISTER"]}),e.jsxs("span",{className:"text-xs font-bold text-slate-500 bg-slate-800 px-2 py-1 rounded-full",children:[c.length," Borgere"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:16}),e.jsx("input",{type:"text",value:x,onChange:s=>m(s.target.value),placeholder:"S√∏k etter navn...",className:"w-full bg-slate-950 border border-slate-700 rounded-xl pl-10 pr-4 py-2 text-sm text-white focus:outline-none focus:border-indigo-500 transition-colors"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:[c.map(s=>{const i=h(s.lastActive),d=s.id===o;return e.jsxs("button",{onClick:()=>r(s),className:`w-full text-left p-3 rounded-xl border border-transparent hover:border-indigo-500/30 hover:bg-slate-800/50 transition-all group flex items-center gap-3 ${d?"opacity-50":""}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 border border-slate-700 flex items-center justify-center text-lg font-bold text-slate-400 group-hover:text-white group-hover:scale-105 transition-all",children:s.avatar?e.jsx("img",{src:s.avatar,className:"w-full h-full rounded-full object-cover"}):s.name[0]}),e.jsx("div",{className:`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-slate-900 ${i?"bg-emerald-500":"bg-slate-600"}`})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-slate-200 truncate group-hover:text-white transition-colors",children:[s.name," ",d&&"(Deg)"]}),s.role==="KING"&&e.jsx(I,{size:12,className:"text-yellow-500 animate-pulse"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1 text-slate-400 capitalize",children:[p(s.role),s.role.toLowerCase()]}),e.jsx("span",{className:"w-1 h-1 bg-slate-700 rounded-full"}),e.jsxs("span",{children:["Lvl ",s.stats.level]})]})]}),e.jsx(G,{size:10,className:"text-indigo-500 opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all",fill:"currentColor"})]},s.id)}),c.length===0&&e.jsx("div",{className:"p-8 text-center text-slate-500 italic text-sm",children:"Ingen borgere funnet."})]})]})},W=T.memo(({players:n,currentPlayer:o,regions:r,onAction:x,pin:m})=>{const{setActiveTab:c,setViewingRegionId:h}=_(),[p,s]=v.useState(null),[i,d]=v.useState("TREE"),b=t=>{s(t)};return e.jsxs($,{title:"Samfunnsstruktur",icon:e.jsx("span",{className:"text-2xl",children:"üëë"}),onClose:()=>c("MAP"),children:[e.jsxs("div",{className:"flex flex-col h-full overflow-hidden relative",children:[e.jsxs("div",{className:"absolute top-0 right-16 z-20 bg-slate-900/80 backdrop-blur rounded-lg p-1 border border-slate-700 flex gap-1",children:[e.jsx("button",{onClick:()=>d("TREE"),className:`p-2 rounded-md transition-colors ${i==="TREE"?"bg-indigo-600 text-white":"text-slate-400 hover:text-white"}`,title:"Hierarki Visning",children:e.jsx(H,{size:18})}),e.jsx("button",{onClick:()=>d("LIST"),className:`p-2 rounded-md transition-colors ${i==="LIST"?"bg-indigo-600 text-white":"text-slate-400 hover:text-white"}`,title:"Register Visning",children:e.jsx(F,{size:18})}),e.jsx("button",{onClick:()=>d("POLITICS"),className:`p-2 rounded-md transition-colors ${i==="POLITICS"?"bg-rose-600 text-white":"text-slate-400 hover:text-white"}`,title:"Politisk Senter",children:e.jsx("span",{className:"font-bold text-xs uppercase tracking-wider px-2",children:"Politikk"})})]}),i==="POLITICS"?e.jsx("div",{className:"p-4 h-full overflow-y-auto custom-scrollbar",children:e.jsx("div",{className:"max-w-2xl mx-auto py-8",children:e.jsx(D,{player:o,room:{regions:r},pin:m})})}):i==="LIST"?e.jsx("div",{className:"p-4 h-full",children:e.jsx(U,{players:n,myId:o.id,onOpenProfile:s})}):e.jsxs("div",{className:"space-y-12 pb-20 pt-4 overflow-y-auto px-4 custom-scrollbar",children:[e.jsx("div",{className:"flex justify-center",children:Object.values(n||{}).filter(t=>t.role==="KING").map(t=>{var a,u;return e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>b(t),children:[e.jsx("div",{className:"bg-gradient-to-br from-amber-600 to-yellow-600 p-1 rounded-3xl shadow-[0_0_50px_rgba(245,158,11,0.4)] hover:scale-105 transition-transform",children:e.jsxs("div",{className:"bg-slate-900/90 p-8 rounded-[1.3rem] flex flex-col items-center min-w-[300px] border border-white/10",children:[e.jsx("div",{className:"text-6xl mb-4 drop-shadow-xl",children:"üëë"}),e.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:t.name}),e.jsx("div",{className:"text-xs font-black uppercase text-amber-500 tracking-widest mb-4",children:"Hans Majestet Kongen"}),e.jsxs("div",{className:"w-full space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-[10px] uppercase font-bold text-slate-400",children:[e.jsx("span",{children:"Legitimitet"}),e.jsxs("span",{children:[((a=t.status)==null?void 0:a.legitimacy)??100,"%"]})]}),e.jsx("div",{className:"h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-rose-500 via-amber-500 to-emerald-500 transition-all duration-1000",style:{width:`${((u=t.status)==null?void 0:u.legitimacy)||100}%`}})})]})]})}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 h-12 w-1 bg-gradient-to-b from-amber-600 to-slate-700 opacity-50"})]},t.id)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 relative pt-8",children:[e.jsx("div",{className:"absolute top-0 left-10 right-10 h-1 bg-slate-700 opacity-30 rounded-full"}),["region_vest","region_ost"].map(t=>{var f,N,w,y,k,S,C;const a=Object.values(n||{}).find(l=>l.role==="BARON"&&l.regionId===t),u=((f=r==null?void 0:r[t])==null?void 0:f.name)||(t==="region_vest"?"Baroniet Vest":"Baroniet √òst");return e.jsxs("div",{className:"flex flex-col gap-4 relative",children:[e.jsx("div",{className:"absolute top-[-32px] left-1/2 -translate-x-1/2 h-8 w-1 bg-slate-700 opacity-30"}),e.jsxs("div",{className:`bg-slate-800/80 p-6 rounded-3xl border border-white/5 shadow-xl relative z-10 ${a?"":"opacity-75"}`,children:[e.jsxs("div",{className:`flex flex-col gap-4 mb-4 border-b border-white/5 pb-4 ${a?"cursor-pointer hover:bg-white/5 rounded-xl p-2 -m-2 transition-colors":""}`,onClick:()=>a&&b(a),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-4xl",children:a?"üè∞":"üèöÔ∏è"}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-lg font-black ${a?"text-white":"text-slate-500"}`,children:a?a.name:"Ingen Baron"}),e.jsx("div",{className:"text-[10px] font-black uppercase text-indigo-400 tracking-widest uppercase",children:u})]})]}),a&&e.jsxs("div",{className:"w-full space-y-1 px-1",children:[e.jsxs("div",{className:"flex justify-between text-[10px] uppercase font-bold text-slate-400",children:[e.jsx("span",{children:"Legitimitet"}),e.jsxs("span",{className:`${((N=a.status)==null?void 0:N.legitimacy)<50?"text-rose-400":"text-emerald-400"}`,children:[((w=a.status)==null?void 0:w.legitimacy)??100,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-black/40 rounded-full overflow-hidden border border-white/5",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-rose-500 via-amber-500 to-emerald-500 transition-all duration-1000",style:{width:`${((y=a.status)==null?void 0:y.legitimacy)??100}%`}})})]})]}),a&&o.id===a.id&&e.jsxs("div",{className:"px-4 pb-4 space-y-2",children:[e.jsxs("button",{onClick:l=>{l.stopPropagation(),c("WAR_ROOM")},className:"w-full py-2 bg-rose-900/40 hover:bg-rose-900/60 border border-rose-700/50 rounded-lg text-rose-200 text-xs font-bold uppercase tracking-wider transition-colors flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üè∞"})," Krigsrommet"]}),((k=r==null?void 0:r[t])==null?void 0:k.activeSiege)&&e.jsxs("button",{onClick:l=>{l.stopPropagation(),h(t),c("SIEGE")},className:"w-full py-2 bg-red-600 hover:bg-red-500 border border-red-400 rounded-lg text-white text-xs font-bold uppercase tracking-wider transition-colors flex items-center justify-center gap-2 animate-pulse",children:[e.jsx("span",{children:"üõ°Ô∏è"})," Forsvar Slottet!"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-[10px] font-black uppercase text-slate-500 tracking-widest mb-2 border-b border-white/5 pb-1",children:"Underst√•tte"}),Object.values(n||{}).filter(l=>(l.role==="PEASANT"||l.role==="SOLDIER")&&l.regionId===t).map(l=>e.jsxs("div",{onClick:()=>b(l),className:"flex items-center gap-3 bg-black/20 p-3 rounded-xl border border-white/5 cursor-pointer hover:bg-indigo-500/20 hover:border-indigo-500/50 transition-all",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-slate-700 rounded-lg text-lg shadow-inner",children:l.role==="SOLDIER"?"‚öîÔ∏è":"üåæ"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-bold text-slate-200",children:l.name}),e.jsx("div",{className:"text-[10px] uppercase text-slate-500 font-bold",children:l.role==="SOLDIER"?"Soldat":"Bonde"})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${l.lastActive>Date.now()-6e4?"bg-emerald-500 shadow-[0_0_5px_#10b981]":"bg-slate-600"}`})]},l.id)),Object.values(n||{}).filter(l=>(l.role==="PEASANT"||l.role==="SOLDIER")&&l.regionId===t).length===0&&e.jsx("div",{className:"text-xs text-slate-600 italic text-center py-4",children:"Ingen unders√•tter enn√•..."})]}),t===o.regionId&&o.id!==(a==null?void 0:a.id)&&e.jsx("div",{className:"px-4 pb-4 mt-4 border-t border-white/5 pt-4",children:(S=r==null?void 0:r[t])!=null&&S.activeSiege?e.jsxs("button",{onClick:l=>{l.stopPropagation(),h(t),c("SIEGE")},className:"w-full py-2 bg-red-600 hover:bg-red-500 border border-red-400 rounded-lg text-white text-xs font-bold uppercase tracking-wider transition-colors flex items-center justify-center gap-2 animate-pulse",children:[e.jsx("span",{children:"üî•"})," G√• til Slagmarken"]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{disabled:Object.values(o.resources||{}).reduce((l,g)=>l+g,0)<500,onClick:l=>{var E;l.stopPropagation();const g=((E=o.resources)==null?void 0:E.swords)||0;if(g<500){alert(`Du mangler sverd! Du har ${g}, men trenger 500 for √• starte en beleiring.`);return}x({type:"START_SIEGE",payload:{targetRegionId:t}})},className:`w-full py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-colors flex items-center justify-center gap-2 ${(((C=o.resources)==null?void 0:C.swords)||0)>=500?"bg-stone-700/50 hover:bg-stone-600/50 border border-stone-500/30 text-stone-300":"bg-slate-900/50 border border-white/5 text-slate-600 cursor-not-allowed"}`,children:[e.jsx("span",{children:"‚öîÔ∏è"})," Start Beleiring"]}),e.jsx("p",{className:"text-[9px] text-center text-slate-500 font-bold uppercase tracking-tight",children:"Krav: 500 Beleiringssverd"})]})})]})]},t)}),e.jsxs("div",{className:"flex flex-col gap-4 relative",children:[e.jsx("div",{className:"absolute top-[-32px] left-1/2 -translate-x-1/2 h-8 w-1 bg-slate-700 opacity-30"}),e.jsxs("div",{className:"bg-slate-800/40 p-6 rounded-3xl border-2 border-dashed border-white/5 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 border-b border-white/5 pb-4 opacity-70",children:[e.jsx("div",{className:"text-4xl",children:"‚öñÔ∏è"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-black text-white",children:"Frie Menn"}),e.jsx("div",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Markedet & Byen"})]})]}),e.jsx("div",{className:"space-y-3",children:Object.values(n||{}).filter(t=>!["KING","BARON"].includes(t.role)&&(!t.regionId||t.regionId==="capital"||t.regionId==="unassigned")).map(t=>e.jsxs("div",{onClick:()=>b(t),className:"flex items-center gap-3 bg-black/20 p-3 rounded-xl border border-white/5 opacity-80 cursor-pointer hover:opacity-100 hover:bg-indigo-500/20 transition-all",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-slate-800 rounded-lg text-lg",children:t.role==="MERCHANT"?"üí∞":t.role==="SOLDIER"?"‚öîÔ∏è":"üë§"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-bold text-slate-300",children:t.name}),e.jsx("div",{className:"text-[10px] uppercase text-slate-500 font-bold",children:t.role})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${t.lastActive>Date.now()-6e4?"bg-emerald-500":"bg-slate-600"}`})]},t.id))})]})]})]})]})]}),p&&e.jsx(P,{isOpen:!0,onClose:()=>s(null),targetPlayer:p,myPlayer:o,pin:m})]})});W.displayName="SimulationHierarchy";export{W as SimulationHierarchy};
