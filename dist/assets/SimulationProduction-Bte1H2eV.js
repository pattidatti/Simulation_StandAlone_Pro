import{c as be,j as e,X as Ee,Y as Se,P as ge,l as V,a as L,J as fe,_ as he,b as Ie,u as Pe,g,S as U,$ as A,R as Ae,C as Ce,G as C,y as Te,V as _e,a0 as ue,T as Oe,h as pe,Z as De}from"./index-CFKtl4MT.js";import{G as O}from"./GameButton-BiavmLtB.js";import{C as $e}from"./chevron-right-ClFHP4Mb.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Be=be("info",Le);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],je=be("wrench",Me),Ue=({id:r,isSelected:a,isLocked:c,canAfford:h,isReady:s,info:f,onSelect:R})=>e.jsxs("button",{onClick:()=>!c&&R(r),className:`flex items-center gap-3 p-3.5 rounded-[1.8rem] border-[1.5px] transition-all group relative overflow-hidden ${c?"grayscale opacity-60 cursor-not-allowed bg-black/20 border-white/5":s?"bg-emerald-500/10 border-emerald-500 shadow-[0_0_25px_rgba(16,185,129,0.15)] animate-in fade-in zoom-in duration-300":a?"bg-indigo-600/10 border-indigo-500 shadow-[0_0_25px_rgba(79,70,229,0.15)]":"bg-slate-900/80 border-white/5 hover:border-white/10 hover:bg-slate-800/80 shadow-lg"}`,children:[c&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center backdrop-blur-[1px]",children:e.jsx(Ee,{className:"w-5 h-5 text-slate-500 animate-spin-slow"})}),e.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center text-3xl shadow-inner group-hover:scale-105 transition-transform ${s?"bg-emerald-500/20":a?"bg-indigo-600/20":"bg-black/40"}`,children:f.icon}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsx("div",{className:`text-base font-black truncate tracking-tighter uppercase transition-colors ${s?"text-emerald-400":a?"text-indigo-300":"text-white"}`,children:f.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${c?"bg-slate-700":s?"bg-emerald-400 animate-pulse":h?"bg-emerald-500":"bg-rose-500 animate-pulse"}`}),e.jsx("span",{className:`text-xs font-black uppercase tracking-[0.05em] ${c?"text-slate-600":s?"text-emerald-400":h?"text-emerald-500/70":"text-rose-500/70"}`,children:c?"LÃ¥st":s?"Ferdig! Trykk for Ã¥ hente":h?"Klar til bruk":"Mangler noe"})]})]}),!c&&e.jsx($e,{className:`w-4 h-4 transition-transform ${s?"text-emerald-500":a?"text-indigo-400 translate-x-1":"text-slate-700"}`})]}),Ve=({recipe:r,player:a,room:c})=>{var N,S,o,I,x,y;const h=((N=c.world)==null?void 0:N.season)||"Spring",s=((S=c.world)==null?void 0:S.weather)||"Clear",f=((o=c.world)==null?void 0:o.totalTicks)||0,R=Se(r.stamina||0,h,s,((I=a.status)==null?void 0:I.buffs)||[],f);return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-white/5 pb-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-black uppercase tracking-[0.2em] text-slate-500",children:[e.jsx(ge,{className:"w-3.5 h-3.5 text-indigo-400"})," Ressurskrav"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Object.entries(r.input).map(([t,i])=>{var E,w;const j=((E=a.resources)==null?void 0:E[t])||0,u=t==="gold"?Math.floor(j):j,P=i,v=u>=P;return e.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${v?"bg-white/[0.03] border-white/5":"bg-rose-500/5 border-rose-500/10"}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(V,{resource:t,size:"sm"}),e.jsx("span",{className:`text-[11px] font-bold uppercase tracking-tight truncate ${v?"text-slate-400":"text-rose-400/80"}`,children:((w=L[t])==null?void 0:w.label)||t})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsx("span",{className:`text-base font-black leading-none ${v?"text-white":"text-rose-400"}`,children:u.toLocaleString()}),e.jsxs("span",{className:"text-sm font-bold text-slate-600 leading-none",children:["/ ",P]})]})]}),e.jsx("div",{className:"w-full h-0.5 bg-black/40 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-1000 ${v?"bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]":"bg-rose-500"}`,style:{width:`${Math.min(100,u/P*100)}%`}})})]},t)}),e.jsxs("div",{className:"relative p-3 rounded-xl border bg-indigo-500/5 border-indigo-500/10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"âš¡"}),e.jsx("span",{className:"text-[11px] font-bold uppercase tracking-tight text-indigo-300/60",children:"Stamina"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsxs("span",{className:"text-base font-black text-indigo-400 leading-none",children:["-",R]}),e.jsxs("span",{className:"text-sm font-bold text-indigo-500/30 leading-none",children:["av ",Math.floor(((x=a.status)==null?void 0:x.stamina)||0)]})]})]}),e.jsx("div",{className:"w-full h-0.5 bg-black/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500",style:{width:`${Math.min(100,(((y=a.status)==null?void 0:y.stamina)||0)/100*100)}%`}})})]})]})]})},Fe=({recipe:r,player:a,type:c})=>{var f,R,N,S,o,I;if(c!=="CRAFT")return null;const h=fe[r.outputItemId];if(!h)return null;const s=Object.values(a.equipment||{}).find(x=>x&&x.type===h.type);return e.jsxs("div",{className:"space-y-4 pb-2 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-xs font-black uppercase tracking-[0.1em] text-slate-500",children:"VerktÃ¸yets egenskaper"}),s?e.jsx("div",{className:"flex items-center gap-1.5 mt-0.5",children:(()=>{var v,E,w,d;const x=((v=h.stats)==null?void 0:v.yieldBonus)||0,y=((E=s==null?void 0:s.stats)==null?void 0:E.yieldBonus)||0,t=((w=h.stats)==null?void 0:w.speedBonus)||1,i=((d=s==null?void 0:s.stats)==null?void 0:d.speedBonus)||1,j=x>y||t>i,u=x<y||t<i;return!j&&!u?e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-slate-500 bg-slate-500/10 px-2 py-0.5 rounded-md border border-slate-500/20",children:"Samme verktÃ¸y"}):j?e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-md border border-emerald-500/20",children:"Bedre egenskaper"}):e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-md border border-rose-500/20",children:"DÃ¥rligere egenskaper"})})()}):e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-indigo-400 mt-1",children:"Nytt verktÃ¸y"})]}),s?e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-white/5 rounded-full border border-white/5",children:[e.jsx("span",{className:"text-sm",children:s.icon}),e.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-tight",children:s.name})]}):e.jsx("span",{className:"text-xs text-slate-600 italic uppercase font-bold",children:"Uten utstyr"})]}),e.jsxs("div",{className:"space-y-2",children:[((((f=h.stats)==null?void 0:f.yieldBonus)||0)>0||(((R=s==null?void 0:s.stats)==null?void 0:R.yieldBonus)||0)>0)&&e.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[e.jsxs("span",{className:"font-bold text-slate-300",children:["Utbytte-bonus ",e.jsx("span",{className:"text-[10px] opacity-40 uppercase",children:"(V/BRUK)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-slate-500 font-bold",children:((N=s==null?void 0:s.stats)==null?void 0:N.yieldBonus)||0}),e.jsx("div",{className:"flex items-center opacity-30",children:e.jsx(he,{className:"w-3.5 h-3.5 text-indigo-400"})}),(()=>{var i,j;const x=((i=h.stats)==null?void 0:i.yieldBonus)||0,y=((j=s==null?void 0:s.stats)==null?void 0:j.yieldBonus)||0,t=x-y;return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:`font-black ${t>0?"text-emerald-400":t<0?"text-rose-400":"text-white"}`,children:x}),t!==0&&e.jsxs("span",{className:`text-[10px] font-black ${t>0?"text-emerald-500/70":"text-rose-500/70"}`,children:["(",t>0?"+":"",t,")"]})]})})()]})]}),((((S=h.stats)==null?void 0:S.speedBonus)||1)>1||(((o=s==null?void 0:s.stats)==null?void 0:o.speedBonus)||1)>1)&&e.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[e.jsxs("span",{className:"font-bold text-slate-300",children:["Hastighet ",e.jsx("span",{className:"text-[10px] opacity-40 uppercase",children:"(V/BRUK)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-slate-500 font-bold",children:[Math.round(((((I=s==null?void 0:s.stats)==null?void 0:I.speedBonus)||1)-1)*100),"%"]}),e.jsx("div",{className:"flex items-center opacity-30",children:e.jsx(he,{className:"w-3.5 h-3.5 text-indigo-400"})}),(()=>{var i,j;const x=Math.round(((((i=h.stats)==null?void 0:i.speedBonus)||1)-1)*100),y=Math.round(((((j=s==null?void 0:s.stats)==null?void 0:j.speedBonus)||1)-1)*100),t=x-y;return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:`font-black ${t>0?"text-blue-400":t<0?"text-rose-400":"text-white"}`,children:[x>0?"+":"",x,"%"]}),t!==0&&e.jsxs("span",{className:`text-[10px] font-black ${t>0?"text-emerald-500/70":"text-rose-500/70"}`,children:["(",t>0?"+":"",t,"%)"]})]})})()]})]})]})]})},Ge=({slot:r,item:a,isSelected:c,onSelect:h})=>{const s=a.durability<a.maxDurability;return e.jsxs("button",{onClick:()=>h(r),className:`w-full flex items-center gap-4 p-5 rounded-[2rem] border-2 transition-all group relative overflow-hidden ${c?"border-amber-500 bg-amber-500/10 shadow-[0_0_20px_rgba(245,158,11,0.2)]":s?"border-amber-500/20 bg-slate-900/80 hover:border-amber-500/40 hover:bg-slate-900/90":"border-white/5 bg-slate-900/60 opacity-60 grayscale"}`,children:[e.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-4xl shadow-inner transition-colors ${c?"bg-amber-500/20":"bg-black/40"}`,children:a.icon}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"text-lg font-black text-white leading-tight flex items-center gap-2",children:[a.name,c&&e.jsx(je,{className:"w-4 h-4 text-amber-500 animate-pulse"})]}),e.jsxs("div",{className:"flex flex-col mt-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs font-bold uppercase tracking-widest text-slate-500",children:[e.jsx("span",{children:"Holdbarhet"}),e.jsxs("span",{className:s?c?"text-amber-400":"text-amber-500":"text-emerald-500",children:[a.durability,"/",a.maxDurability]})]}),e.jsx("div",{className:"w-full h-1 bg-black/40 rounded-full mt-1 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${s?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${a.durability/a.maxDurability*100}%`}})})]})]}),c&&e.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-amber-500 opacity-50",children:e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-current animate-ping"})})]})},Ke=({isStationWithRepair:r,viewMode:a,setViewMode:c})=>r?e.jsxs("div",{className:"flex bg-black/40 p-1 rounded-xl border border-white/10 shadow-inner",children:[e.jsx("button",{onClick:()=>c("PRODUCE"),className:`px-5 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${a==="PRODUCE"?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Produksjon"}),e.jsx("button",{onClick:()=>c("REPAIR"),className:`px-5 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${a==="REPAIR"?"bg-amber-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Reparasjon"})]}):null,He=Ie.memo(({player:r,room:a,onAction:c,pin:h})=>{var F,G,K,H,z,q,W,J,Y,Q,X,Z,ee,se,te,ae,le,re,ie,ne,ce;const{productionContext:s,setActiveTab:f,actionLoading:R}=Pe(),[N,S]=g.useState((s==null?void 0:s.initialView)||"PRODUCE");g.useEffect(()=>{s!=null&&s.initialView&&S(s.initialView)},[s==null?void 0:s.initialView]);const[o,I]=g.useState(null),[x,y]=g.useState(null),t=N==="REPAIR"&&x?r.equipment[x]:null;if(!s)return e.jsx(U,{title:"Produksjon",onClose:()=>f("MAP"),icon:"ðŸ”¨",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center space-y-6 py-20",children:[e.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full flex items-center justify-center text-4xl",children:"âš ï¸"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Utilgjengelig"}),e.jsx("p",{className:"text-slate-500 italic max-w-xs",children:"Vennligst velg en produksjonsstasjon pÃ¥ kartet for Ã¥ starte."})]}),e.jsx(O,{variant:"ghost",onClick:()=>f("MAP"),className:"border border-white/10",children:"Tilbake til Kartet"})]})});const{buildingId:i,type:j}=s,u=_e[i],P=g.useMemo(()=>!!A[i],[i]),v=g.useMemo(()=>{const l=Object.entries(Ae).filter(([m,p])=>p.buildingId===i).map(([m,p])=>[m,p,"REFINE"]),n=Object.entries(Ce).filter(([m,p])=>p.buildingId===i).map(([m,p])=>[m,p,"CRAFT"]);return[...l,...n]},[i]),E=g.useMemo(()=>{const l={};return v.forEach(([n,m,p])=>{const b=m.level||1;l[b]||(l[b]=[]),l[b].push([n,m,p])}),Object.entries(l).sort(([n],[m])=>parseInt(n)-parseInt(m))},[v]),w=g.useMemo(()=>{if(!o)return null;const l=v.find(n=>n[0]===o);return l?{recipe:l[1],type:l[2]}:null},[o,v]),d=(w==null?void 0:w.recipe)||null,D=(w==null?void 0:w.type)||j;g.useEffect(()=>{if(!o&&E.length>0){const l=E[0][1][0][0];I(l)}},[P,E,o]),g.useEffect(()=>{S("PRODUCE")},[P]);const $=(l,n)=>{var m,p,b;if(n.label)return{id:l,name:n.label,icon:n.icon||"ðŸ“¦",description:n.description||`Produserer ${n.label}`};if(n.outputResource)return{id:n.outputResource,name:((m=L[n.outputResource])==null?void 0:m.label)||n.outputResource,icon:((p=L[n.outputResource])==null?void 0:p.icon)||"ðŸ“¦",description:`Produserer ${n.outputAmount||((b=n.output)==null?void 0:b.amount)||1} enheter med ${n.outputResource}.`};{const k=fe[n.outputItemId];return{id:n.outputItemId,name:(k==null?void 0:k.name)||n.outputItemId,icon:(k==null?void 0:k.icon)||"âš”ï¸",description:(k==null?void 0:k.description)||"Et solid hÃ¥ndverk."}}},T=((K=(G=(((F=a==null?void 0:a.world)==null?void 0:F.settlement)||{}).buildings)==null?void 0:G[i])==null?void 0:K.level)||1,[B,Ne]=g.useState(Date.now());g.useEffect(()=>{const l=setInterval(()=>Ne(Date.now()),1e3);return()=>clearInterval(l)},[]);const M=g.useMemo(()=>(r.activeProcesses||[]).filter(l=>l.locationId===i),[r.activeProcesses,i]),_=g.useMemo(()=>M.find(l=>l.readyAt<=B),[M,B]),ve=()=>{if(_){c({type:"HARVEST",locationId:i});return}!o||!d||(d.level||1)>T||c(D==="REFINE"?{type:"REFINE",recipeId:o}:{type:"CRAFT",subType:o})},we=()=>{!x||!i||c({type:"REPAIR",targetSlot:x,buildingId:i})};if(i==="watchtower"&&N==="PRODUCE"){const l=r.role==="SOLDIER",n=r.role==="PEASANT"&&(r.stats.level||1)>=C.CAREERS.SOLDIER.LEVEL_REQ,m=C.CAREERS.SOLDIER.COST;return e.jsx(U,{title:"VaktÃ¥rn & Garnison",icon:"ðŸ°",onClose:()=>f("MAP"),maxWidth:"max-w-4xl",children:e.jsxs("div",{className:"py-8 space-y-8",children:[e.jsxs("div",{className:"relative h-48 rounded-3xl overflow-hidden border border-white/10 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 to-transparent z-10"}),e.jsx("div",{className:"absolute inset-0 bg-[url('/garrison_header.png')] bg-cover bg-center opacity-60 group-hover:scale-105 transition-transform duration-700"}),e.jsxs("div",{className:"absolute bottom-6 left-8 z-20",children:[e.jsx("h2",{className:"text-3xl font-black text-white italic tracking-tighter",children:"FORSVAR LANDSBYEN"}),e.jsx("p",{className:"text-slate-300 font-medium",children:"Bli en del av eliten. Beskytt dine brÃ¸dre."})]})]}),l?e.jsxs("div",{className:"bg-slate-900/50 p-8 rounded-3xl border border-white/5 text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-emerald-900/50 rounded-full flex items-center justify-center mx-auto text-4xl border border-emerald-500/30",children:"ðŸ›¡ï¸"}),e.jsx("h3",{className:"text-2xl font-black text-white",children:"Du er i tjeneste"}),e.jsx("p",{className:"text-slate-400 max-w-md mx-auto",children:"Takk for din tjeneste, soldat. Bruk produksjonsfanen til Ã¥ lage utstyr, eller patruljer landsbyen via Handlinger."}),e.jsx(O,{variant:"ghost",className:"border-white/10",onClick:()=>f("MAP"),children:"Tilbake til tjeneste"})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-3xl border border-white/5 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Krav for verving"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400 text-sm",children:"NivÃ¥"}),e.jsxs("span",{className:`font-bold ${r.stats.level>=C.CAREERS.SOLDIER.LEVEL_REQ?"text-emerald-400":"text-rose-400"}`,children:[r.stats.level,"/",C.CAREERS.SOLDIER.LEVEL_REQ]})]}),e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400 text-sm",children:"Vervekostnad"}),e.jsxs("span",{className:`font-bold ${r.resources.gold>=m?"text-emerald-400":"text-rose-400"}`,children:[m," Gull"]})]})]})]}),e.jsx("div",{className:"mt-8 p-4 bg-amber-900/20 border border-amber-500/20 rounded-xl",children:e.jsx("p",{className:"text-xs text-amber-200/80 italic text-center",children:'"Holdbarhet og Ã¦re er alt vi krever. Og litt gull til utstyr."'})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/40 to-slate-900/40 p-6 rounded-3xl border border-indigo-500/30 flex flex-col items-center justify-center text-center space-y-6",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-500 rounded-full flex items-center justify-center text-3xl shadow-[0_0_20px_rgba(99,102,241,0.4)] animate-pulse",children:"âš”ï¸"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-white",children:"VERV DEG NÃ…"}),e.jsx("p",{className:"text-indigo-200 text-sm mt-1",children:"FÃ¥ tilgang til vÃ¥penkammer og patruljer."})]}),e.jsx(O,{variant:"primary",size:"lg",className:"w-full bg-indigo-600 hover:bg-indigo-500 border-indigo-400/50",onClick:()=>{window.confirm("Verve deg som soldat? Du vil miste din bonde-status.")&&Te(h,r.id,"SOLDIER")},disabled:!n||r.resources.gold<m||!!R,children:r.resources.gold<m?"IKKE NOK GULL":"SIGNER KONTRAKT"})]})]})]})})}return e.jsx(U,{title:(u==null?void 0:u.name)||"Verksted",subtitle:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"opacity-60",children:u==null?void 0:u.description}),e.jsx("span",{className:"w-1 h-1 bg-white/20 rounded-full"}),e.jsxs("span",{className:"text-indigo-400",children:["NivÃ¥ ",T]})]}),icon:(u==null?void 0:u.icon)||"ðŸ”¨",onClose:()=>f("MAP"),maxWidth:"max-w-6xl",headerRight:e.jsx(Ke,{isStationWithRepair:P,viewMode:N,setViewMode:S}),children:e.jsx("div",{className:"space-y-6 py-2 animate-in fade-in slide-in-from-bottom-6 duration-700",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start",children:[e.jsx("div",{className:"flex-1 space-y-6",children:N==="PRODUCE"?e.jsx("div",{className:"space-y-10",children:E.map(([l,n])=>{const p=parseInt(l)>T;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-black tracking-widest uppercase ${p?"bg-slate-800 text-slate-500":"bg-indigo-600 text-white"}`,children:["Tier ",l]}),e.jsx("div",{className:"flex-1 h-px bg-white/5"}),p&&e.jsxs("span",{className:"text-xs font-bold text-slate-600 italic flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"})," Oppgrader ",u==null?void 0:u.name," til NivÃ¥ ",l]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:n.map(([b,k,ye])=>{var de,oe,xe;const ke=ue(r,ye==="REFINE"?{type:"REFINE",recipeId:b}:{type:"CRAFT",subType:b},(de=a.world)==null?void 0:de.season,(oe=a.world)==null?void 0:oe.weather,((xe=a.world)==null?void 0:xe.gameTick)||0),Re=M.some(me=>me.itemId===b&&me.readyAt<=B);return e.jsx(Ue,{id:b,isSelected:o===b,isLocked:p,canAfford:ke.success,isReady:Re,info:$(b,k),onSelect:I},b)})})]},l)})}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(H=A[i])==null?void 0:H.slots.map(l=>{const n=r.equipment[l];return n?e.jsx(Ge,{slot:l,item:n,isSelected:x===l,onSelect:y},l):null}),((z=A[i])==null?void 0:z.slots.every(l=>!r.equipment[l]))&&e.jsx("div",{className:"col-span-full py-12 text-center bg-slate-900/40 rounded-[2rem] border border-dashed border-white/5",children:e.jsx("p",{className:"text-slate-500 italic",children:"Ingen relevante gjenstander utstyrt for reparasjon her."})})]})})}),e.jsx("div",{className:`w-full lg:w-[400px] shrink-0 transition-all duration-500 ${N==="REPAIR"?"scale-95 opacity-80":d?"opacity-100":"opacity-30 grayscale pointer-events-none"}`,children:N==="REPAIR"?e.jsx("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-amber-500/20 rounded-[2.5rem] p-6",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-amber-500 to-orange-600 rounded-[2rem] flex items-center justify-center text-6xl mx-auto shadow-2xl border-4 border-white/10 mb-6",children:t.icon}),e.jsx("h3",{className:"text-2xl font-black text-white tracking-tighter mb-2",children:t.name}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:["Holdbarhet: ",e.jsxs("span",{className:"text-amber-500",children:[t.durability," / ",t.maxDurability]})]}),e.jsx("div",{className:"w-48 h-1.5 bg-black/40 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500",style:{width:`${t.durability/t.maxDurability*100}%`}})})]})]}),e.jsxs("div",{className:"bg-black/40 rounded-3xl p-6 border border-white/5 space-y-4",children:[e.jsx("div",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Reparasjonskostnad"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{resource:"gold",size:"sm"}),e.jsx("span",{className:"text-sm font-bold text-slate-300",children:"Gull"})]}),e.jsxs("span",{className:"text-amber-400 font-black",children:["-",((q=A[i])==null?void 0:q.goldCost)||0]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{resource:((W=A[i])==null?void 0:W.material)||"iron_ingot",size:"sm"}),e.jsx("span",{className:"text-sm font-bold text-slate-300",children:((Y=L[((J=A[i])==null?void 0:J.material)||"iron_ingot"])==null?void 0:Y.label)||"Materiale"})]}),e.jsx("span",{className:"text-amber-400 font-black",children:"-1"})]})]})]}),e.jsx("div",{className:"mt-8 mb-6 p-6 bg-indigo-500/5 border border-indigo-500/10 rounded-2xl",children:e.jsx("p",{className:"text-sm text-indigo-200/90 font-medium text-center leading-relaxed",children:"Reparasjon gjenoppretter 30 holdbarhetspoeng."})}),e.jsx(O,{variant:"primary",size:"lg",className:"h-20 text-xl w-full bg-amber-600 hover:bg-amber-500 border-amber-400/50",onClick:we,disabled:!!R||t.durability>=t.maxDurability||(((Q=r.resources)==null?void 0:Q.gold)||0)<(((X=A[i])==null?void 0:X.goldCost)||0)||(((ee=r.resources)==null?void 0:ee[(Z=A[i])==null?void 0:Z.material])||0)<1,children:t.durability>=t.maxDurability?"FULL HOLDBARHET":"REPARER GJENSTAND"})]}):e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center text-center opacity-50",children:[e.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mb-6",children:e.jsx(je,{className:"w-10 h-10 text-slate-600"})}),e.jsx("h4",{className:"text-xl font-bold text-slate-400",children:"Velg utstyr"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-[200px] mt-2",children:"Trykk pÃ¥ en gjenstand til venstre for Ã¥ se reparasjonsdetaljer."})]})}):d?e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-[2.5rem] p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-[1.8rem] flex items-center justify-center text-5xl mx-auto shadow-2xl border-[3px] border-white/10 mb-4 group-hover:rotate-6 transition-transform",children:$(o,d).icon}),e.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter mb-2",children:$(o,d).name}),e.jsx("p",{className:"text-slate-400 text-sm font-medium px-6 leading-relaxed",children:$(o,d).description})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ve,{recipe:d,player:r,room:a}),e.jsxs("div",{className:"bg-black/40 rounded-3xl p-5 border border-white/5 space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-black uppercase tracking-widest text-slate-500",children:[e.jsx(Oe,{className:"w-3 h-3"})," Utbytte & Sammenligning"]}),e.jsx(Fe,{recipe:d,player:r,type:D}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-[11px] font-black uppercase tracking-widest text-slate-500 border-b border-white/5 pb-2",children:"Dette produseres"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-wider",children:"Basis-antall"}),e.jsxs("div",{className:"text-xl font-black text-white leading-none",children:["+",d.outputAmount||((se=d.output)==null?void 0:se.amount)||1]})]}),e.jsx("div",{className:"h-8 w-[1px] bg-white/5"}),e.jsxs("div",{className:"space-y-1 text-right",children:[e.jsxs("div",{className:"text-[10px] text-emerald-500 font-black uppercase tracking-wider",children:["Bonus fra ",((te=pe[d.skill])==null?void 0:te.label)||"Evne"]}),e.jsxs("div",{className:"text-xl font-black text-emerald-400 leading-none",children:["+",Math.floor((d.outputAmount||1)*(((le=(ae=r.skills)==null?void 0:ae[d.skill])==null?void 0:le.level)||0)*(D==="REFINE"?C.SKILLS.REFINING_BONUS:C.SKILLS.GATHERING_BONUS))]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-slate-500 uppercase tracking-wider",children:[e.jsx(De,{className:"w-3 h-3 text-amber-500"})," ",((re=pe[d.skill])==null?void 0:re.label)||"Produksjon"," XP"]}),e.jsxs("span",{className:"text-amber-500 font-black text-sm",children:["+",d.xp||10," XP"]})]})]}),e.jsx(O,{variant:"primary",size:"lg",className:`h-20 text-xl w-full transition-all duration-300 ${_?"bg-emerald-600 hover:bg-emerald-500 border-emerald-400/50 shadow-[0_0_30px_rgba(16,185,129,0.2)]":""}`,onClick:ve,disabled:!!R||!_&&((d.level||1)>T||!ue(r,D==="REFINE"?{type:"REFINE",recipeId:o}:{type:"CRAFT",subType:o},(ie=a.world)==null?void 0:ie.season,(ne=a.world)==null?void 0:ne.weather,((ce=a.world)==null?void 0:ce.gameTick)||0).success),children:_?`HENT ${_.itemId===(o||"")?((d==null?void 0:d.label)||"PRODUKSJON").toUpperCase():"PRODUKSJON"}`:(d.level||1)>T?"KREVER OPPGRADERING":"START PRODUKSJON"})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-12 bg-slate-900/20 border-2 border-dashed border-white/10 rounded-[3rem]",children:[e.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mb-6",children:e.jsx(Be,{className:"w-10 h-10 text-slate-600"})}),e.jsx("h4",{className:"text-xl font-black text-slate-400 mb-2",children:"Ingen oppskrift valgt"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Velg en gjenstand fra listen til venstre for Ã¥ se detaljer og starte produksjon."})]})})]})})})});He.displayName="SimulationProduction";export{He as SimulationProduction};
