import{q as Se,ae as Ie,j as e,aa as je,F as V,a as F,a9 as fe,af as ue,c as Ae,d as Pe,e as p,S as U,l as _,ag as E,R as Te,C as Ce,G as L,P as Le,V as Oe,a1 as pe,T as De,t as be,Z as Be,ah as _e}from"./index-CUcovZMJ.js";import{R as Me}from"./RecipeCard-BlS4xgws.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Ne=Se("wrench",$e),Fe=({recipe:l,player:r,room:m})=>{var j,S,d,A,c,N;const b=((j=m.world)==null?void 0:j.season)||"Spring",t=((S=m.world)==null?void 0:S.weather)||"Clear",k=((d=m.world)==null?void 0:d.totalTicks)||0,I=Ie(l.stamina||0,b,t,((A=r.status)==null?void 0:A.buffs)||[],k);return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-white/5 pb-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-black uppercase tracking-[0.2em] text-slate-500",children:[e.jsx(je,{className:"w-3.5 h-3.5 text-indigo-400"})," Ressurskrav"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Object.entries(l.input).map(([i,n])=>{var R,w;const f=((R=r.resources)==null?void 0:R[i])||0,h=i==="gold"?Math.floor(f):f,P=n,v=h>=P;return e.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${v?"bg-white/[0.03] border-white/5":"bg-rose-500/5 border-rose-500/10"}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(V,{resource:i,size:"sm"}),e.jsx("span",{className:`text-[11px] font-bold uppercase tracking-tight truncate ${v?"text-slate-400":"text-rose-400/80"}`,children:((w=F[i])==null?void 0:w.label)||i})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsx("span",{className:`text-base font-black leading-none ${v?"text-white":"text-rose-400"}`,children:h.toLocaleString()}),e.jsxs("span",{className:"text-sm font-bold text-slate-600 leading-none",children:["/ ",P]})]})]}),e.jsx("div",{className:"w-full h-0.5 bg-black/40 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-1000 ${v?"bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]":"bg-rose-500"}`,style:{width:`${Math.min(100,h/P*100)}%`}})})]},i)}),e.jsxs("div",{className:"relative p-3 rounded-xl border bg-indigo-500/5 border-indigo-500/10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"âš¡"}),e.jsx("span",{className:"text-[11px] font-bold uppercase tracking-tight text-indigo-300/60",children:"Stamina"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsxs("span",{className:"text-base font-black text-indigo-400 leading-none",children:["-",I]}),e.jsxs("span",{className:"text-sm font-bold text-indigo-500/30 leading-none",children:["av ",Math.floor(((c=r.status)==null?void 0:c.stamina)||0)]})]})]}),e.jsx("div",{className:"w-full h-0.5 bg-black/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500",style:{width:`${Math.min(100,(((N=r.status)==null?void 0:N.stamina)||0)/100*100)}%`}})})]})]})]})},Ue=({recipe:l,player:r,type:m})=>{var k,I,j,S,d,A;if(m!=="CRAFT")return null;const b=fe[l.outputItemId];if(!b)return null;const t=Object.values(r.equipment||{}).find(c=>c&&c.type===b.type);return e.jsxs("div",{className:"space-y-4 pb-2 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-xs font-black uppercase tracking-[0.1em] text-slate-500",children:"VerktÃ¸yets egenskaper"}),t?e.jsx("div",{className:"flex items-center gap-1.5 mt-0.5",children:(()=>{var v,R,w,o;const c=((v=b.stats)==null?void 0:v.yieldBonus)||0,N=((R=t==null?void 0:t.stats)==null?void 0:R.yieldBonus)||0,i=((w=b.stats)==null?void 0:w.speedBonus)||1,n=((o=t==null?void 0:t.stats)==null?void 0:o.speedBonus)||1,f=c>N||i>n,h=c<N||i<n;return!f&&!h?e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-slate-500 bg-slate-500/10 px-2 py-0.5 rounded-md border border-slate-500/20",children:"Samme verktÃ¸y"}):f?e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-md border border-emerald-500/20",children:"Bedre egenskaper"}):e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider text-rose-500 bg-rose-500/10 px-2 py-0.5 rounded-md border border-rose-500/20",children:"DÃ¥rligere egenskaper"})})()}):e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-indigo-400 mt-1",children:"Nytt verktÃ¸y"})]}),t?e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-white/5 rounded-full border border-white/5",children:[e.jsx("span",{className:"text-sm",children:t.icon}),e.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-tight",children:t.name})]}):e.jsx("span",{className:"text-xs text-slate-600 italic uppercase font-bold",children:"Uten utstyr"})]}),e.jsxs("div",{className:"space-y-2",children:[((((k=b.stats)==null?void 0:k.yieldBonus)||0)>0||(((I=t==null?void 0:t.stats)==null?void 0:I.yieldBonus)||0)>0)&&e.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[e.jsxs("span",{className:"font-bold text-slate-300",children:["Utbytte-bonus ",e.jsx("span",{className:"text-[10px] opacity-40 uppercase",children:"(V/BRUK)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-slate-500 font-bold",children:((j=t==null?void 0:t.stats)==null?void 0:j.yieldBonus)||0}),e.jsx("div",{className:"flex items-center opacity-30",children:e.jsx(ue,{className:"w-3.5 h-3.5 text-indigo-400"})}),(()=>{var n,f;const c=((n=b.stats)==null?void 0:n.yieldBonus)||0,N=((f=t==null?void 0:t.stats)==null?void 0:f.yieldBonus)||0,i=c-N;return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:`font-black ${i>0?"text-emerald-400":i<0?"text-rose-400":"text-white"}`,children:c}),i!==0&&e.jsxs("span",{className:`text-[10px] font-black ${i>0?"text-emerald-500/70":"text-rose-500/70"}`,children:["(",i>0?"+":"",i,")"]})]})})()]})]}),((((S=b.stats)==null?void 0:S.speedBonus)||1)>1||(((d=t==null?void 0:t.stats)==null?void 0:d.speedBonus)||1)>1)&&e.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[e.jsxs("span",{className:"font-bold text-slate-300",children:["Hastighet ",e.jsx("span",{className:"text-[10px] opacity-40 uppercase",children:"(V/BRUK)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-slate-500 font-bold",children:[Math.round(((((A=t==null?void 0:t.stats)==null?void 0:A.speedBonus)||1)-1)*100),"%"]}),e.jsx("div",{className:"flex items-center opacity-30",children:e.jsx(ue,{className:"w-3.5 h-3.5 text-indigo-400"})}),(()=>{var n,f;const c=Math.round(((((n=b.stats)==null?void 0:n.speedBonus)||1)-1)*100),N=Math.round(((((f=t==null?void 0:t.stats)==null?void 0:f.speedBonus)||1)-1)*100),i=c-N;return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:`font-black ${i>0?"text-blue-400":i<0?"text-rose-400":"text-white"}`,children:[c>0?"+":"",c,"%"]}),i!==0&&e.jsxs("span",{className:`text-[10px] font-black ${i>0?"text-emerald-500/70":"text-rose-500/70"}`,children:["(",i>0?"+":"",i,"%)"]})]})})()]})]})]})]})},ge=({slot:l,item:r,isSelected:m,onSelect:b})=>{const t=r.durability<r.maxDurability;return e.jsxs("button",{onClick:()=>b(l),className:`w-full flex items-center gap-4 p-5 rounded-[2rem] border-2 transition-all group relative overflow-hidden ${m?"border-amber-500 bg-amber-500/10 shadow-[0_0_20px_rgba(245,158,11,0.2)]":t?"border-amber-500/20 bg-slate-900/80 hover:border-amber-500/40 hover:bg-slate-900/90":"border-white/5 bg-slate-900/60 opacity-60 grayscale"}`,children:[e.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-4xl shadow-inner transition-colors ${m?"bg-amber-500/20":"bg-black/40"}`,children:r.icon}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"text-lg font-black text-white leading-tight flex items-center gap-2",children:[r.name,m&&e.jsx(Ne,{className:"w-4 h-4 text-amber-500 animate-pulse"})]}),e.jsxs("div",{className:"flex flex-col mt-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs font-bold uppercase tracking-widest text-slate-500",children:[e.jsx("span",{children:"Holdbarhet"}),e.jsxs("span",{className:t?m?"text-amber-400":"text-amber-500":"text-emerald-500",children:[r.durability,"/",r.maxDurability]})]}),e.jsx("div",{className:"w-full h-1 bg-black/40 rounded-full mt-1 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${t?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${r.durability/r.maxDurability*100}%`}})})]})]}),m&&e.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-amber-500 opacity-50",children:e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-current animate-ping"})})]})},Ve=({isStationWithRepair:l,viewMode:r,setViewMode:m})=>l?e.jsxs("div",{className:"flex bg-black/40 p-1 rounded-xl border border-white/10 shadow-inner",children:[e.jsx("button",{onClick:()=>m("PRODUCE"),className:`px-5 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${r==="PRODUCE"?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Produksjon"}),e.jsx("button",{onClick:()=>m("REPAIR"),className:`px-5 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${r==="REPAIR"?"bg-amber-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Reparasjon"})]}):null,Ge=Ae.memo(({player:l,room:r,onAction:m,pin:b})=>{var G,K,q,H,z,W,J,Y,Q,X,Z,ee,se,te,ae,le,ie,ne,re,ce,de;const{productionContext:t,setActiveTab:k,actionLoading:I}=Pe(),[j,S]=p.useState((t==null?void 0:t.initialView)||"PRODUCE");p.useEffect(()=>{t!=null&&t.initialView&&S(t.initialView)},[t==null?void 0:t.initialView]);const[d,A]=p.useState(null),[c,N]=p.useState(null),i=p.useMemo(()=>{var a;if(j!=="REPAIR"||!c)return null;const s=l.equipment[c];return s||((a=l.inventory)==null?void 0:a.find(x=>x.id===c))||null},[j,c,l.equipment,l.inventory]);if(!t)return e.jsx(U,{title:"Produksjon",onClose:()=>k("MAP"),icon:"ðŸ”¨",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center space-y-6 py-20",children:[e.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full flex items-center justify-center text-4xl",children:"âš ï¸"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Utilgjengelig"}),e.jsx("p",{className:"text-slate-500 italic max-w-xs",children:"Vennligst velg en produksjonsstasjon pÃ¥ kartet for Ã¥ starte."})]}),e.jsx(_,{variant:"ghost",onClick:()=>k("MAP"),className:"border border-white/10",children:"Tilbake til Kartet"})]})});const{buildingId:n,type:f}=t,h=Oe[n],P=p.useMemo(()=>!!E[n],[n]),v=p.useMemo(()=>{const s=Object.entries(Te).filter(([x,u])=>u.buildingId===n).map(([x,u])=>[x,u,"REFINE"]),a=Object.entries(Ce).filter(([x,u])=>u.buildingId===n).map(([x,u])=>[x,u,"CRAFT"]);return[...s,...a]},[n]),R=p.useMemo(()=>{const s={};return v.forEach(([a,x,u])=>{const g=x.level||1;s[g]||(s[g]=[]),s[g].push([a,x,u])}),Object.entries(s).sort(([a],[x])=>parseInt(a)-parseInt(x))},[v]),w=p.useMemo(()=>{if(!d)return null;const s=v.find(a=>a[0]===d);return s?{recipe:s[1],type:s[2]}:null},[d,v]),o=(w==null?void 0:w.recipe)||null,M=(w==null?void 0:w.type)||f;p.useEffect(()=>{if(!d&&R.length>0){const s=R[0][1][0][0];A(s)}},[P,R,d]),p.useEffect(()=>{S("PRODUCE")},[P]);const $=(s,a)=>{var x,u,g;if(a.label)return{id:s,name:a.label,icon:a.icon||"ðŸ“¦",description:a.description||`Produserer ${a.label}`};if(a.outputResource)return{id:a.outputResource,name:((x=F[a.outputResource])==null?void 0:x.label)||a.outputResource,icon:((u=F[a.outputResource])==null?void 0:u.icon)||"ðŸ“¦",description:`Produserer ${a.outputAmount||((g=a.output)==null?void 0:g.amount)||1} enheter med ${a.outputResource}.`};{const y=fe[a.outputItemId];return{id:a.outputItemId,name:(y==null?void 0:y.name)||a.outputItemId,icon:(y==null?void 0:y.icon)||"âš”ï¸",description:(y==null?void 0:y.description)||"Et solid hÃ¥ndverk."}}},O=((q=(K=(((G=r==null?void 0:r.world)==null?void 0:G.settlement)||{}).buildings)==null?void 0:K[n])==null?void 0:q.level)||1,[T,ve]=p.useState(Date.now());p.useEffect(()=>{const s=setInterval(()=>ve(Date.now()),1e3);return()=>clearInterval(s)},[]);const D=p.useMemo(()=>(l.activeProcesses||[]).filter(s=>s.locationId===n),[l.activeProcesses,n]),B=p.useMemo(()=>D.find(s=>s.readyAt<=T),[D,T]),C=p.useMemo(()=>d?D.find(s=>s.itemId===d&&s.readyAt>T):null,[D,d,T]),we=()=>{if(B){m({type:"HARVEST",locationId:n});return}!d||!o||(o.level||1)>O||m(M==="REFINE"?{type:"REFINE",recipeId:d}:{type:"CRAFT",subType:d})},ye=()=>{if(!c||!n)return;const s=!!l.equipment[c];m({type:"REPAIR",targetSlot:s?c:void 0,itemUid:s?void 0:c,buildingId:n})};if(n==="watchtower"&&j==="PRODUCE"){const s=l.role==="SOLDIER",a=l.role==="PEASANT"&&(l.stats.level||1)>=L.CAREERS.SOLDIER.LEVEL_REQ,x=L.CAREERS.SOLDIER.COST;return e.jsx(U,{title:"VaktÃ¥rn & Garnison",icon:"ðŸ°",onClose:()=>k("MAP"),maxWidth:"max-w-4xl",children:e.jsxs("div",{className:"py-8 space-y-8",children:[e.jsxs("div",{className:"relative h-48 rounded-3xl overflow-hidden border border-white/10 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 to-transparent z-10"}),e.jsx("div",{className:"absolute inset-0 bg-[url('/garrison_header.png')] bg-cover bg-center opacity-60 group-hover:scale-105 transition-transform duration-700"}),e.jsxs("div",{className:"absolute bottom-6 left-8 z-20",children:[e.jsx("h2",{className:"text-3xl font-black text-white italic tracking-tighter",children:"FORSVAR LANDSBYEN"}),e.jsx("p",{className:"text-slate-300 font-medium",children:"Bli en del av eliten. Beskytt dine brÃ¸dre."})]})]}),s?e.jsxs("div",{className:"bg-slate-900/50 p-8 rounded-3xl border border-white/5 text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-emerald-900/50 rounded-full flex items-center justify-center mx-auto text-4xl border border-emerald-500/30",children:"ðŸ›¡ï¸"}),e.jsx("h3",{className:"text-2xl font-black text-white",children:"Du er i tjeneste"}),e.jsx("p",{className:"text-slate-400 max-w-md mx-auto",children:"Takk for din tjeneste, soldat. Bruk produksjonsfanen til Ã¥ lage utstyr, eller patruljer landsbyen via Handlinger."}),e.jsx(_,{variant:"ghost",className:"border-white/10",onClick:()=>k("MAP"),children:"Tilbake til tjeneste"})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-3xl border border-white/5 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Krav for verving"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400 text-sm",children:"NivÃ¥"}),e.jsxs("span",{className:`font-bold ${l.stats.level>=L.CAREERS.SOLDIER.LEVEL_REQ?"text-emerald-400":"text-rose-400"}`,children:[l.stats.level,"/",L.CAREERS.SOLDIER.LEVEL_REQ]})]}),e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400 text-sm",children:"Vervekostnad"}),e.jsxs("span",{className:`font-bold ${l.resources.gold>=x?"text-emerald-400":"text-rose-400"}`,children:[x," Gull"]})]})]})]}),e.jsx("div",{className:"mt-8 p-4 bg-amber-900/20 border border-amber-500/20 rounded-xl",children:e.jsx("p",{className:"text-xs text-amber-200/80 italic text-center",children:'"Holdbarhet og Ã¦re er alt vi krever. Og litt gull til utstyr."'})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/40 to-slate-900/40 p-6 rounded-3xl border border-indigo-500/30 flex flex-col items-center justify-center text-center space-y-6",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-500 rounded-full flex items-center justify-center text-3xl shadow-[0_0_20px_rgba(99,102,241,0.4)] animate-pulse",children:"âš”ï¸"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-white",children:"VERV DEG NÃ…"}),e.jsx("p",{className:"text-indigo-200 text-sm mt-1",children:"FÃ¥ tilgang til vÃ¥penkammer og patruljer."})]}),e.jsx(_,{variant:"primary",size:"lg",className:"w-full bg-indigo-600 hover:bg-indigo-500 border-indigo-400/50",onClick:()=>{window.confirm("Verve deg som soldat? Du vil miste din bonde-status.")&&Le(b,l.id,"SOLDIER")},disabled:!a||l.resources.gold<x||!!I,children:l.resources.gold<x?"IKKE NOK GULL":"SIGNER KONTRAKT"})]})]})]})})}return e.jsx(U,{title:(h==null?void 0:h.name)||"Verksted",subtitle:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"opacity-60",children:h==null?void 0:h.description}),e.jsx("span",{className:"w-1 h-1 bg-white/20 rounded-full"}),e.jsxs("span",{className:"text-indigo-400",children:["NivÃ¥ ",O]})]}),icon:(h==null?void 0:h.icon)||"ðŸ”¨",onClose:()=>k("MAP"),maxWidth:"max-w-6xl",headerRight:e.jsx(Ve,{isStationWithRepair:P,viewMode:j,setViewMode:S}),children:e.jsx("div",{className:"space-y-6 py-2 animate-in fade-in slide-in-from-bottom-6 duration-700",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start",children:[e.jsx("div",{className:"flex-1 space-y-6",children:j==="PRODUCE"?e.jsx("div",{className:"space-y-10",children:R.map(([s,a])=>{const u=parseInt(s)>O;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-black tracking-widest uppercase ${u?"bg-slate-800 text-slate-500":"bg-indigo-600 text-white"}`,children:["Tier ",s]}),e.jsx("div",{className:"flex-1 h-px bg-white/5"}),u&&e.jsxs("span",{className:"text-xs font-bold text-slate-600 italic flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"})," Oppgrader ",h==null?void 0:h.name," til NivÃ¥ ",s]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.map(([g,y,ke])=>{var oe,xe,me;const Re=pe(l,ke==="REFINE"?{type:"REFINE",recipeId:g}:{type:"CRAFT",subType:g},(oe=r.world)==null?void 0:oe.season,(xe=r.world)==null?void 0:xe.weather,((me=r.world)==null?void 0:me.gameTick)||0),Ee=D.some(he=>he.itemId===g&&he.readyAt<=T);return e.jsx(Me,{id:g,isSelected:d===g,isLocked:u,canAfford:Re.success,isReady:Ee,info:$(g,y),onSelect:A},g)})})]},s)})}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(H=E[n])==null?void 0:H.slots.map(s=>{const x=(l.equipment||{})[s];return x?e.jsx(ge,{slot:s,item:x,isSelected:c===s,onSelect:N},`slot-${s}`):null}),(l.inventory||[]).filter(s=>{var a;return(a=E[n])==null?void 0:a.slots.includes(s.type)}).map(s=>e.jsx(ge,{slot:s.id,item:s,isSelected:c===s.id,onSelect:N},`inv-${s.id}`)),((z=E[n])==null?void 0:z.slots.every(s=>!(l.equipment||{})[s]))&&!(l.inventory||[]).some(s=>{var a;return(a=E[n])==null?void 0:a.slots.includes(s.type)})&&e.jsx("div",{className:"col-span-full py-12 text-center bg-slate-900/40 rounded-[2rem] border border-dashed border-white/5",children:e.jsx("p",{className:"text-slate-500 italic",children:"Ingen relevante gjenstander for reparasjon her."})})]})})}),e.jsx("div",{className:`w-full lg:w-[400px] shrink-0 transition-all duration-500 ${j==="REPAIR"?"scale-95 opacity-80":o?"opacity-100":"opacity-30 grayscale pointer-events-none"}`,children:j==="REPAIR"?e.jsx("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-amber-500/20 rounded-[2.5rem] p-6",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-amber-500 to-orange-600 rounded-[2rem] flex items-center justify-center text-6xl mx-auto shadow-2xl border-4 border-white/10 mb-6",children:i.icon}),e.jsx("h3",{className:"text-2xl font-black text-white tracking-tighter mb-2",children:i.name}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:["Holdbarhet: ",e.jsxs("span",{className:"text-amber-500",children:[i.durability," / ",i.maxDurability]})]}),e.jsx("div",{className:"w-48 h-1.5 bg-black/40 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500",style:{width:`${i.durability/i.maxDurability*100}%`}})})]})]}),e.jsxs("div",{className:"bg-black/40 rounded-3xl p-6 border border-white/5 space-y-4",children:[e.jsx("div",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Reparasjonskostnad"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{resource:"gold",size:"sm"}),e.jsx("span",{className:"text-sm font-bold text-slate-300",children:"Gull"})]}),e.jsxs("span",{className:"text-amber-400 font-black",children:["-",((W=E[n])==null?void 0:W.goldCost)||0]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{resource:((J=E[n])==null?void 0:J.material)||"iron_ingot",size:"sm"}),e.jsx("span",{className:"text-sm font-bold text-slate-300",children:((Q=F[((Y=E[n])==null?void 0:Y.material)||"iron_ingot"])==null?void 0:Q.label)||"Materiale"})]}),e.jsx("span",{className:"text-amber-400 font-black",children:"-1"})]})]})]}),e.jsx("div",{className:"mt-8 mb-6 p-6 bg-indigo-500/5 border border-indigo-500/10 rounded-2xl",children:e.jsx("p",{className:"text-sm text-indigo-200/90 font-medium text-center leading-relaxed",children:"Reparasjon gjenoppretter 30 holdbarhetspoeng."})}),e.jsx(_,{variant:"primary",size:"lg",className:"h-20 text-xl w-full bg-amber-600 hover:bg-amber-500 border-amber-400/50",onClick:ye,disabled:!!I||i.durability>=i.maxDurability||(((X=l.resources)==null?void 0:X.gold)||0)<(((Z=E[n])==null?void 0:Z.goldCost)||0)||(((se=l.resources)==null?void 0:se[(ee=E[n])==null?void 0:ee.material])||0)<1,children:i.durability>=i.maxDurability?"FULL HOLDBARHET":"REPARER GJENSTAND"})]}):e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center text-center opacity-50",children:[e.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mb-6",children:e.jsx(Ne,{className:"w-10 h-10 text-slate-600"})}),e.jsx("h4",{className:"text-xl font-bold text-slate-400",children:"Velg utstyr"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-[200px] mt-2",children:"Trykk pÃ¥ en gjenstand til venstre for Ã¥ se reparasjonsdetaljer."})]})}):o?e.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl border border-white/10 rounded-[2.5rem] p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-[1.8rem] flex items-center justify-center text-5xl mx-auto shadow-2xl border-[3px] border-white/10 mb-4 group-hover:rotate-6 transition-transform",children:$(d,o).icon}),e.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter mb-2",children:$(d,o).name}),e.jsx("p",{className:"text-slate-400 text-sm font-medium px-6 leading-relaxed",children:$(d,o).description})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Fe,{recipe:o,player:l,room:r}),e.jsxs("div",{className:"bg-black/40 rounded-3xl p-5 border border-white/5 space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-black uppercase tracking-widest text-slate-500",children:[e.jsx(De,{className:"w-3 h-3"})," Utbytte & Sammenligning"]}),e.jsx(Ue,{recipe:o,player:l,type:M}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-[11px] font-black uppercase tracking-widest text-slate-500 border-b border-white/5 pb-2",children:"Dette produseres"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[10px] text-slate-500 font-black uppercase tracking-wider",children:"Basis-antall"}),e.jsxs("div",{className:"text-xl font-black text-white leading-none",children:["+",o.outputAmount||((te=o.output)==null?void 0:te.amount)||1]})]}),e.jsx("div",{className:"h-8 w-[1px] bg-white/5"}),e.jsxs("div",{className:"space-y-1 text-right",children:[e.jsxs("div",{className:"text-[10px] text-emerald-500 font-black uppercase tracking-wider",children:["Bonus fra ",((ae=be[o.skill])==null?void 0:ae.label)||"Evne"]}),e.jsxs("div",{className:"text-xl font-black text-emerald-400 leading-none",children:["+",Math.floor((o.outputAmount||1)*(((ie=(le=l.skills)==null?void 0:le[o.skill])==null?void 0:ie.level)||0)*(M==="REFINE"?L.SKILLS.REFINING_BONUS:L.SKILLS.GATHERING_BONUS))]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-slate-500 uppercase tracking-wider",children:[e.jsx(Be,{className:"w-3 h-3 text-amber-500"})," ",((ne=be[o.skill])==null?void 0:ne.label)||"Produksjon"," XP"]}),e.jsxs("span",{className:"text-amber-500 font-black text-sm",children:["+",o.xp||10," XP"]})]})]}),e.jsxs(_,{variant:"primary",size:"lg",className:`h-20 text-xl w-full transition-all duration-300 relative overflow-hidden ${B?"bg-emerald-600 hover:bg-emerald-500 border-emerald-400/50 shadow-[0_0_30px_rgba(16,185,129,0.2)]":""}`,onClick:we,disabled:!!I||!B&&!C&&((o.level||1)>O||!pe(l,M==="REFINE"?{type:"REFINE",recipeId:d}:{type:"CRAFT",subType:d},(re=r.world)==null?void 0:re.season,(ce=r.world)==null?void 0:ce.weather,((de=r.world)==null?void 0:de.gameTick)||0).success),children:[C&&e.jsx("div",{className:"absolute inset-0 bg-white/10 transition-all duration-1000 ease-linear pointer-events-none",style:{width:`${Math.min(100,(1-(C.readyAt-T)/(C.duration||1e3))*100)}%`}}),e.jsx("div",{className:"relative z-10 flex items-center justify-center gap-3",children:B?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-bounce",children:"ðŸŽ"}),e.jsxs("span",{children:["HENT ",B.itemId===(d||"")?((o==null?void 0:o.label)||"PRODUKSJON").toUpperCase():"PRODUKSJON"]})]}):C?e.jsxs("div",{className:"flex flex-col items-center leading-none",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] opacity-60 mb-1",children:"Produksjon pÃ¥gÃ¥r"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin text-sm",children:"âš™ï¸"}),e.jsxs("span",{className:"font-mono text-2xl",children:[Math.ceil((C.readyAt-T)/1e3),"s"]})]})]}):e.jsx(e.Fragment,{children:(o.level||1)>O?e.jsx("span",{children:"KREVER OPPGRADERING"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"ðŸ”¥"}),e.jsx("span",{children:"START PRODUKSJON"})]})})})]})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-12 bg-slate-900/20 border-2 border-dashed border-white/10 rounded-[3rem]",children:[e.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mb-6",children:e.jsx(_e,{className:"w-10 h-10 text-slate-600"})}),e.jsx("h4",{className:"text-xl font-black text-slate-400 mb-2",children:"Ingen oppskrift valgt"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Velg en gjenstand fra listen til venstre for Ã¥ se detaljer og starte produksjon."})]})})]})})})});Ge.displayName="SimulationProduction";export{Ge as SimulationProduction};
