import{b,r as g,s as m,g as v,u as A}from"./index-CUcovZMJ.js";async function w(r,s,n,k){var l,f,u;if(!r||!s||!n)return;const c=n.unlockedAchievements||{},h=Array.isArray(c)?new Set(c):new Set(Object.keys(c)),o=[];for(const t of b){if(h.has(t.id))continue;let e=!1;switch(t.id){case"first_steps":(((l=s.stats)==null?void 0:l.level)||1)>=2&&(e=!0);break;case"resource_gatherer":(((f=s.stats)==null?void 0:f.level)||1)>=5&&(e=!0);break;case"baron_rising":s.role==="BARON"&&(e=!0);break;case"king_slayer":s.role==="KING"&&(e=!0);break;case"soul_awakening":(n.globalLevel||1)>=5&&(e=!0);break;case"eternal_dynasty":(((u=n.characterHistory)==null?void 0:u.length)||0)>=10&&(e=!0);break}e&&o.push(t.id)}if(o.length===0)return;const d=g(m,`simulation_accounts/${r}`),a={};let i=n.globalXp||0;for(const t of o){const e=v(t);e&&(a[`unlockedAchievements/${t}`]=Date.now(),i+=e.xp,k(t))}a.globalXp=i,a.globalLevel=Math.floor(Math.sqrt(i/100))+1;try{await A(d,a),console.log(`Unlocked items for ${r}: ${o.join(", ")}`)}catch(t){console.error("Failed to unlock achievements:",t)}}export{w as checkAndUnlockAchievements};
