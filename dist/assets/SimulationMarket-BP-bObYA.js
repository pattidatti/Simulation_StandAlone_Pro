import{c as p,b as y,u as M,j as e,S,l as L,G as i,y as T,a as f}from"./index-B2rBCrqg.js";import{G as E}from"./GameCard-D58uvOAL.js";import{G as h}from"./GameButton-r0kJ3Fkn.js";import{B as x}from"./Badge-CaHT88Np.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],H=p("arrow-left-right",_);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]],R=p("ship",K);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],w=p("shopping-bag",P),O=y.memo(({player:t,market:g,regions:C,allMarkets:m,onAction:c,pin:k})=>{var j,b,v;const{actionLoading:r,setActiveTab:A}=M();return e.jsx(S,{title:"Markedshandel",icon:e.jsx(w,{className:"w-8 h-8"}),onClose:()=>A("MAP"),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-end border-b border-white/10 pb-4",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-game-stone_light text-sm mt-1",children:["KjÃ¸p og selg varer i ",g?"lokalmarkedet":"hovedstaden","."]})}),e.jsxs("div",{className:"flex items-center gap-2 bg-black/40 px-4 py-2 rounded-xl border border-game-gold/30",children:[e.jsx("span",{className:"text-game-stone_light text-xs font-bold uppercase",children:"Saldo:"}),e.jsx(L,{resource:"gold",amount:(j=t.resources)==null?void 0:j.gold,size:"md"})]})]}),t.role==="PEASANT"&&e.jsxs("div",{className:"bg-gradient-to-r from-emerald-900/40 to-indigo-900/40 border border-emerald-500/30 rounded-2xl p-6 flex flex-col md:flex-row items-center justify-between gap-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(R,{size:120})}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-900/80 rounded-2xl flex items-center justify-center border border-emerald-500/50 shadow-[0_0_15px_rgba(16,185,129,0.3)]",children:e.jsx("span",{className:"text-3xl",children:"ðŸ“œ"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-white uppercase tracking-wide",children:["Handelsbrev",(t.stats.level||1)<i.CAREERS.MERCHANT.LEVEL_REQ&&e.jsxs(x,{variant:"outline",className:"ml-2 text-rose-400 border-rose-400",children:["Krever Lvl ",i.CAREERS.MERCHANT.LEVEL_REQ]})]}),e.jsx("p",{className:"text-emerald-200 text-sm max-w-sm",children:"KjÃ¸p lisens til Ã¥ drive internasjonal handel. LÃ¥ser opp handelsruter og profittmuligheter."})]})]}),e.jsxs("div",{className:"relative z-10 flex flex-col items-end gap-2",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:`text-xs font-bold uppercase tracking-wider ${((b=t.resources)==null?void 0:b.gold)>=i.CAREERS.MERCHANT.COST?"text-emerald-400":"text-rose-400"}`,children:["Pris: ",i.CAREERS.MERCHANT.COST," Gull"]})}),e.jsx(h,{variant:"primary",onClick:()=>{window.confirm("KjÃ¸pe Handelsbrev og bli KjÃ¸pmann?")&&T(k,t.id,"MERCHANT")},disabled:((v=t.resources)==null?void 0:v.gold)<i.CAREERS.MERCHANT.COST||(t.stats.level||1)<i.CAREERS.MERCHANT.LEVEL_REQ||!!r,className:"bg-emerald-600 hover:bg-emerald-500 border-emerald-400/50 min-w-[200px]",children:(t.stats.level||1)<i.CAREERS.MERCHANT.LEVEL_REQ?`Krever Level ${i.CAREERS.MERCHANT.LEVEL_REQ}`:"BLI KJÃ˜PMANN"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(g||{}).map(([s,l])=>{var N,u;const a=f[s]||{label:s,icon:"ðŸ“¦"},d=l.price||0,n=l.stock||0,o=((N=t.resources)==null?void 0:N[s])||0;return e.jsxs(E,{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-4xl bg-black/20 p-3 rounded-xl",children:a.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display font-bold text-xl text-white capitalize",children:a.label}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsxs(x,{variant:"outline",children:["Lager: ",n]}),e.jsxs(x,{variant:"default",children:["Eier: ",o]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-game-stone_light uppercase font-bold",children:"Pris pr. enhet"}),e.jsxs("div",{className:"text-2xl font-bold text-game-gold",children:[d.toFixed(1),"g"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-auto pt-4 border-t border-white/5",children:[e.jsx(h,{variant:"primary",onClick:()=>c({type:"BUY",resource:s}),disabled:(((u=t.resources)==null?void 0:u.gold)||0)<d||n<=0||!!r,icon:e.jsx(w,{className:"w-4 h-4"}),children:"KJÃ˜P"}),e.jsx(h,{variant:"wood",onClick:()=>c({type:"SELL",resource:s}),disabled:o<1||!!r,icon:e.jsx(H,{className:"w-4 h-4"}),children:"SELG"})]})]},s)})}),t.role==="MERCHANT"&&e.jsxs("div",{className:"mt-12 space-y-6 pt-8 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-2xl font-display font-bold text-white flex items-center gap-3",children:[e.jsx(R,{className:"w-6 h-6 text-blue-400"}),"Handelsruter"]}),e.jsx(x,{variant:"role",children:"Kun for KjÃ¸pmenn"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(C||{}).concat([{id:"capital",name:"Kongeriket (Hovedstaden)"}]).filter(s=>s.id!==t.regionId&&s.id!==void 0).map(s=>{const l=m==null?void 0:m[s.id];return l?e.jsx(E,{title:s.name,className:"bg-indigo-950/30 border-indigo-500/20",children:e.jsx("div",{className:"space-y-3",children:["grain","wood","iron"].map(a=>{const d=l[a];if(!d)return null;const n=d.price,o=f[a]||{label:a,icon:"ðŸ“¦"};return e.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-2 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:o.icon}),e.jsx("span",{className:"text-sm font-bold text-game-stone_light capitalize",children:o.label})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-game-gold font-bold text-sm",children:[n.toFixed(0),"g"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>c({type:"TRADE_ROUTE",targetRegionId:s.id,resource:a,action:"IMPORT"}),disabled:!!r,className:"px-2 py-1 bg-emerald-900/50 text-emerald-400 text-[10px] font-bold rounded border border-emerald-500/30 hover:bg-emerald-500 hover:text-white transition-colors",title:"Importer (KjÃ¸p herfra)",children:"IMP"}),e.jsx("button",{onClick:()=>c({type:"TRADE_ROUTE",targetRegionId:s.id,resource:a,action:"EXPORT"}),disabled:!!r,className:"px-2 py-1 bg-red-900/50 text-red-400 text-[10px] font-bold rounded border border-red-500/30 hover:bg-red-500 hover:text-white transition-colors",title:"Eksporter (Selg hit)",children:"EXP"})]})]})]},a)})})},s.id):null})})]})]})})});O.displayName="SimulationMarket";export{O as SimulationMarket};
