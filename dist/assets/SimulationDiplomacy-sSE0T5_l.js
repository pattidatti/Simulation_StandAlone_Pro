import{c as r,d as o,j as t,S as c,M as m,u as x,r as p,s as u}from"./index-DLzf93r1.js";const b=r.memo(({diplomacy:i,player:s,pin:n})=>{const{setActiveTab:d}=o(),l=async e=>{if(!e)return;const a=`msg_${Date.now()}`;await x(p(u,`simulation_rooms/${n}/diplomacy/${a}`),{id:a,senderId:s.id,senderName:s.name,receiverId:"ALL_RULERS",content:e,timestamp:Date.now()})};return t.jsx(c,{title:"Diplomati",icon:t.jsx(m,{className:"w-8 h-8"}),onClose:()=>d("MAP"),className:"flex flex-col h-full",children:t.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between border-b border-white/5 pb-4",children:[t.jsx("p",{className:"text-slate-400 text-sm italic",children:"Kommuniser med de andre herskerne i riket."}),t.jsx("span",{className:"text-xs font-black uppercase text-indigo-500 tracking-widest bg-indigo-500/10 px-4 py-1 rounded-full",children:"Kryptert Kanal"})]}),t.jsx("div",{className:"flex-1 min-h-[400px] flex flex-col gap-4 p-6 bg-black/20 rounded-3xl border border-white/5 overflow-y-auto custom-scrollbar",children:i?Object.values(i).filter(e=>e.receiverId==="ALL_RULERS"||e.receiverId===s.id||e.senderId===s.id).sort((e,a)=>(e.timestamp||0)-(a.timestamp||0)).map(e=>t.jsxs("div",{className:`p-4 rounded-2xl max-w-[80%] ${e.senderId===s.id?"bg-indigo-600 text-white self-end rounded-br-none shadow-lg shadow-indigo-600/20":"bg-slate-800/80 text-slate-200 self-start rounded-bl-none border border-white/5"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[t.jsx("span",{className:"text-[10px] font-black uppercase opacity-60 italic",children:e.senderName}),t.jsx("span",{className:"text-[8px] opacity-40",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),t.jsx("p",{className:"text-sm font-medium",children:e.content})]},e.id)):t.jsx("div",{className:"m-auto text-slate-500 text-sm font-black italic",children:"Ingen meldinger..."})}),t.jsxs("div",{className:"flex gap-3 bg-slate-800/50 p-2 rounded-2xl border border-white/5 shrink-0",children:[t.jsx("input",{type:"text",id:"diplomacyInputWidescreen",placeholder:"Send beskjed til riket...",className:"flex-1 bg-transparent px-4 py-3 outline-none text-white font-bold",onKeyDown:e=>{e.key==="Enter"&&e.target.value&&(l(e.target.value),e.target.value="")}}),t.jsx("button",{onClick:()=>{const e=document.getElementById("diplomacyInputWidescreen");e&&e.value&&(l(e.value),e.value="")},className:"bg-indigo-600 text-white px-8 rounded-xl font-black text-sm hover:bg-indigo-500 transition-all active:scale-95",children:"SEND"})]})]})})});b.displayName="SimulationDiplomacy";export{b as SimulationDiplomacy};
